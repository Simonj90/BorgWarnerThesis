\chapter{To estimate friction}

\section{What is friction?}
Friction is the force that resists one element of material sliding against another. There are several types of friction, one of them is dry friction which resists relative lateral motion of two solid surfaces in contact. Hence dry friction is the force that one must overcome to pull a box along a floor. Dry friction is the friction that's important for this work. Further on dry friction can be divided in two, static friction and kinetic friction. Coulomb friction is a model used to approximate dry friction. It's expressed as:

\begin{equation}
F_{f}\leq\mu F_{n}
\end{equation}

where

\begin{itemize}
	\item $ F_{f} $ is the force of friction, it's parallel to the surface and has a direction opposed the applied net force.
	\item $ \mu $ is the coefficient of friction, different for different surfaces.
	\item $ F_{n} $ is the normal force exerted by each surface on the other.
\end{itemize}

This model provides a threshold for how much force of friction is needed to move an object. As long as the force of friction is less than or equal to the normal force multiplied by the friction coefficient of the two surfaces the object will remain static. How much force that is needed to move an object along a surface is thus decided by two factors, the normal force acting on the object and the coefficient of friction between the two surfaces. When the force of friction gets larger than this threshold the object will start to move, hence leaving the static friction region and entering the kinetic friction region. 

\section{Tire/road friction}


\section{Tire stiffness}

The force generated from to the car through the tires can, in the linear region, be described as a function of the tire stiffness and the slip. The lateral and longitudinal forces can be described respectively as
\begin{equation}
	F_{x} = C_{x}*\kappa
\end{equation}
\begin{equation}
	F_{y} = C_{\alpha}*\alpha
\end{equation}

The tire stiffness is therefore the amount of force generated per slip. This is only valid in the linear region, thus the theoretical definition of the longitudinal tire stiffness is the gradient of the force/slip around 0 slip, seen in FIGURE?!?!??!?. 
\section{Restrictions}

\begin{itemize}
	\item slip angle paverkar kraften i langsled
	\item Vy ar svart att fa fram
	\item langsaccelerometer finns inte alltid, berakna acc fran bakhjul brusigt
	\item vad hander nar hjulet spinner -> mycket slip, kraften okar ju inte
	\item kraften som kravs for acceleration paverkas av lutning av vag osv.
	\item 
\end{itemize}

\section{Restrictions and conditions}
There have been lots of research and model proposals related to friction estimation the last decades. The outcome of these papers usually show promising results, where the proposed solution works very well during simulations and testing. This is of course a natural part of a research, that the authors want to deliver good solutions to the problem proposed. These different solution that are proposed can provide a lot of help to this paper and guide us a long way. But due to the fact that most results are based on theoretical simulations and that our solution has to work in a real environment with actual sensor signals, a lot of the information provided can be very misleading or useless. 

The problem proposed in this work is tire/road friction estimation for a car using an FXD, and it is therefore important to define the conditions and restrictions that have to be applied throughout this work. First of all, cars with an FXD installed are exclusively front wheel driven, meaning that there are no longitudinal forces acting on the rear tires when accelerating. Therefore the velocity of the rear wheels can in most cases be used as reference speed for the whole vehicle (actually not entirely true when cornering). Through the same reasoning, the acceleration of the car can be derived from the derivative of the rear wheel speeds. Another aspect that has to be considered is that the FXD is an active limited slip differential, which means that the torque applied to the two driven wheels can be different in certain driving situations, unlike a car with a regular open differential. The most important aspect that has to be considered is the fact that the friction model has to work in a real car handled in actual driving situations. A major fact is that the sensor signals that are to be used  will come from the cars controller area network buss (CAN bus) and therefore include both measurement and process noise leading to inaccurate signals. 

The true dynamics of a car and especially a tire is very complex and difficult to describe accurately. The models described earlier work well in describing the vehicle and tire in many situations. But are in many situations not able to capture the actual detailed dynamics. Together with the inaccurate measurements mentioned earlier, this provides a great challenge on the path on finding the estimated tire/road friction. 

\begin{equation}
\mu(F_{z})=\mu_{nominal}*(\mu_{max} + (-k)\frac{F_{z} - F_{z_{0}}}{F_{z_{0}}})
\end{equation}

\section{Friction models}

\subsection{Slip-slope friction model}

One friction model that is frequently used and referred to in research papers is the so called slip-slope friction model. The models general idea is that the maximum tire/road friction available can be decided due to its dependency on the slope from the slip-force curve in the linear region. This slip-force curve has the same characteristics as the slip-friction coefficient curve seen in Figure \ref{fric_slip}. 
\begin{equation}
	\dfrac{F_{x}}{F_{z}} = k*\kappa
\end{equation}
Where $ F_{x} $ and $ F_{z} $ is the estimated longitudinal and normal force acting on a tire depending on input values. The slip-slope can be estimated with for example recursive least square fitting.


\subsection{Kalman filter and recursive least squares}
This approach is done in two steps. First the forces on each wheel are estimated with a Kalman filter. Then the tire road friction coefficient is found by fitting a tire model to the estimated tire force.